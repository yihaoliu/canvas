{"dependencies":[{"name":"./utils"},{"name":"./rect"},{"name":"./data"},{"name":"./utils/addEvent"},{"name":"../images/bg.png"}],"generated":{"js":"\"use strict\";\n\nvar _utils = require(\"./utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _rect = require(\"./rect\");\n\nvar _rect2 = _interopRequireDefault(_rect);\n\nvar _data = require(\"./data\");\n\nvar _data2 = _interopRequireDefault(_data);\n\nvar _addEvent = require(\"./utils/addEvent\");\n\nvar _addEvent2 = _interopRequireDefault(_addEvent);\n\nvar _bg = require(\"../images/bg.png\");\n\nvar _bg2 = _interopRequireDefault(_bg);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(function (glbal) {\n\n  var img = new Image();\n  img.src = _bg2.default;\n\n  var myCan = function myCan() {\n    var win = _utils2.default.getWindowDetil();\n    this.width = win.width;\n    this.height = win.height;\n    this.elem = null;\n    this.ctx = null;\n    this.img = null;\n    this.mouse = {\n      x: null,\n      y: null\n    };\n    this.zoom = 1;\n  };\n  myCan.prototype.render = function (elem, canDetail, callback) {\n    var that = this;\n    var node = document.createElement(\"canvas\");\n    node.style.margin = 0;\n    node.style.padding = 0;\n    if (canDetail) {\n      for (var key in canDetail) {\n        node[key] = canDetail[key];\n      }\n    }\n    if (!canDetail || !canDetail.width) {\n      node.width = this.width;\n    }\n    if (!canDetail || !canDetail.height) {\n      node.height = this.height;\n    }\n    elem.appendChild(node);\n    //鼠标监听\n    listener(node, 'mousedown', function (detail) {\n\n      that.mouse = Object.assign(that.mouse, detail);\n      var zoom = that.zoom;\n      for (var i = 0; i < _data2.default.length; i++) {\n        var item = _data2.default[i];\n        var max = {\n          x: (item.x + item.width) * zoom,\n          y: (item.y + item.height) * zoom\n        };\n        var min = {\n          x: item.x * zoom,\n          y: item.y * zoom\n        };\n        var mousToRect = false;\n        var haveMous = that.mouse.x && that.mouse.y;\n        if (haveMous && that.mouse.x > min.x && that.mouse.x < max.x && that.mouse.y > min.y && that.mouse.y < max.y) {\n          item.mousToRect = !item.mousToRect;\n          _data2.default[i] = item;\n          break;\n        }\n      }\n      that.draw(_data2.default);\n    });\n    //鼠标移动监听事件\n    listener(node, 'mousemove', function (detail) {\n\n      that.mouse = Object.assign(that.mouse, detail);\n    });\n    //滚轮监听\n    (0, _addEvent2.default)(node, \"mousewheel\", function (event) {\n      if (event.delta < 0) {\n        that.zoom -= 0.02;\n      } else {\n        that.zoom += 0.02;\n      }\n      that.draw(_data2.default);\n    });\n\n    this.elem = node;\n    this.ctx = node.getContext('2d');\n    img.onload = function () {\n      that.draw(_data2.default);\n    };\n    callback && callback();\n    return node;\n  };\n  myCan.prototype.draw = function (detail) {\n    this.ctx.clearRect(0, 0, this.width, this.height);\n    var that = this;\n\n    var zoom = this.zoom;\n    var rectArr = [];\n    var mobile = {\n      x: 0,\n      y: 0\n    };\n    that.img = img;\n    that.ctx.drawImage(that.img, mobile.x, mobile.x, img.width * that.zoom, img.height * that.zoom);\n    detail.map(function (item, index) {\n      var newRect = new _rect2.default();\n      newRect.draw(that.ctx, detail[index], that.zoom);\n    });\n  };\n  var newCan = new myCan();\n  var app = document.getElementById(\"app\");\n  newCan.render(app);\n  function dataFilter() {}\n  function listener(elem, type, callback) {\n    (0, _addEvent2.default)(elem, type, function (event) {\n      var e = event || window.event;\n      var mouse = {\n        x: e.clientX,\n        y: e.clientY\n      };\n      var elemDetail = elem.getBoundingClientRect();\n\n      callback && callback({ x: mouse.x - elemDetail.x, y: mouse.y - elemDetail.y });\n    }, false);\n  }\n})(undefined);"},"hash":"757d2b76c051921e643614f68cc968cf"}